---
# *** Main configuration file for the HSPC Reference Platform Installer ***

# To customize the HSPC stack, you can either edit the settings directly in
# this file or set up custom settings overrides (such as custom_settings.yml)

# The user account that will host the servers. If a user account of this name
# already exists on the system, the installer will not alter its credentials or
# authentication mechanism. If you need to set up actual password authentication,
# userpass needs to be a valid SHA-512 hash.

services_host: "localhost"

hosting_username: "hspc"
hosting_userpass: "nopass"
hosting_user_home: "/home/{{hosting_username}}"
hosting_user_home_projects: "{{hosting_user_home}}/projects"
hosting_user_home_apps: "{{hosting_user_home}}/apps"
hosting_user_home_hspc: "{{hosting_user_home}}/hspc"
m2_repo_folder: "{{hosting_user_home}}/.m2/repository"

top_level_domain: "org"
second_level_domain: "hspconsortium"
additional_subdomains: ""
domain_name: "{{additional_subdomains}}{{second_level_domain}}.{{top_level_domain}}"

# Suppresses selective task execution (set this to true if you would like to
# force the playbook to always rebuild the servers and reload them)
force_rebuild: true

# By default Ansible will update the local copies of the servers code from
# the source repositories. Set this to "no" if you would rather not have the
# repositories updated on each run.
update_repositories: "yes"

# Settigs for Jetty and Oracle Java. You probably won't have to alter these
# unles you are switching to a different version of Jetty or Java
java_home: "/usr/lib/jvm/java-8-openjdk-amd64/jre"
jetty_download_url: "http://central.maven.org/maven2/org/eclipse/jetty/jetty-runner/9.3.6.v20151106/jetty-runner-9.3.6.v20151106.jar"

# Database configuration
mysql_host: "{{services_host}}"
mysql_connect_host: "%"
mysql_endpoint: "{{mysql_host}}:3306"
mysql_url: "jdbc:mysql://{{mysql_endpoint}}"
mysql_root_pass: "password"
mysql_username: "fhir"
mysql_password: "password"
#mysql_privilage: "{{auth_server_database}}.*:ALL/{{sandman_database}}.*:ALL/*.*:ALL,GRANT"
mysql_privilage: "*.*:ALL,GRANT"
mysql_bind_address: "0.0.0.0"

# Password for the Java keystore used by the authorization server (please change)
keystore_password: "changeme"

# When set to true, https is used
use_secure_http: false

# When setting up SSL security for the various services, these settings will allow you to
# specify your own certificates instead of using self-signed certificates.
# See files/sample-certificates for the names of the certificate files expected by the script
use_custom_ssl_certificates: false
#custom_ssl_certificates_path: examples/certificates

certificate_crt_filename: "self-signed-certificate.crt"
certificate_key_filename: "self-signed-certificate.key"

certificate_truststore_alias: "hspc"

# Self-signed SSL certificates settings (if generating self-signed certificates)
self_signed_certificate_ssl_country: "US"
self_signed_certificate_ssl_province: "UT"
self_signed_certificate_ssl_locality: "Murray"
self_signed_certificate_ssl_organization: "HSPConsortium"
self_signed_certificate_ssl_division: "support"
self_signed_certificate_ssl_email: "support@{{domain_name}}"

# Controls whether HTTP requests on port 80 will be
# redirected to the server's base URLs
http_redirect: true

# Set this to either "open" or "secured" on the primary endpoint /data
fhir_server_security_mode: "secured"
# Set this to either "true" or "false" to allow an open endpoint at /open
fhir_server_allow_open_access: true

# Artifact Repositories
smart_repo_base: "https://github.com/smart-on-fhir"
hspc_repo_base: "https://bitbucket.org/hspconsortium"

# Apps Repositories
app_server_host: "{{services_host}}"
app_server_port: "9093"

# Account
account_server_host: "localhost"
account_server_port: "8065"
account_server_url: "http://{{account_server_host}}:{{account_server_port}}"
account_server_external_host: "localhost"
account_server_external_port: "9065"
account_server_external_url: "http://{{account_server_external_host}}:{{account_server_external_port}}"
account_server_project_repo_name: "account"
account_server_project_repo_branch: "master"
account_server_project_folder: "{{hosting_user_home}}/{{account_server_project_repo_name}}"
account_firebase_projectName: "hspc-tst"
account_firebase_databaseUrl: "https://hspc-tst.firebaseio.com"
account_accountLoginPage: "{{account_server_external_url}}"
account_accountLogoutPage: "{{account_server_external_url}}/logout"

# Auth Server
auth_server_host: "localhost"
auth_server_port: "8060"
auth_server_url: "http://{{auth_server_host}}:{{auth_server_port}}"
auth_server_external_host: "localhost"
auth_server_external_port: "9060"
auth_server_external_url: "http://{{auth_server_external_host}}:{{auth_server_external_port}}"
auth_server_initial_memory: 128M
auth_server_max_memory: 256M
auth_server_artifact_group_id: "org.hspconsortium.reference"
auth_server_artifact_artifact_id: "hspc-reference-auth-server-firebase-webapp"
auth_server_artifact_version: "1.6-SNAPSHOT"
auth_server_artifact_packaging: "war"
auth_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/reference/{{auth_server_artifact_artifact_id}}/{{auth_server_artifact_version}}/{{auth_server_artifact_artifact_id}}-{{auth_server_artifact_version}}.{{auth_server_artifact_packaging}}"
auth_server_database: "oic"
auth_server_enable_mock_endpoints: true
auth_server_persona_cookie_domain: "localhost"

# API Server client
api_server_oauth2_clientId: "hspc_resource_server"
api_server_oauth2_clientSecret: "secret"

# API_STU3 Database
api_stu3_schema_version: 4
api_stu3_server_sandbox: "hspc{{api_stu3_schema_version}}"
api_stu3_server_database: "hspc_{{api_stu3_schema_version}}_{{api_stu3_server_sandbox}}"

# API_STU3 Server
api_stu3_server_host: "localhost"
api_stu3_server_port: "8074"
api_stu3_server_url: "http://{{api_stu3_server_host}}:{{api_stu3_server_port}}"
api_stu3_server_external_host: "localhost"
api_stu3_server_external_port: "9074"
api_stu3_server_external_url: "http://{{api_stu3_server_external_host}}:{{api_stu3_server_external_port}}"
api_stu3_server_initial_memory: 128M
api_stu3_server_max_memory: 256M
api_stu3_server_artifact_group_id: "org.hspconsortium.reference"
api_stu3_server_artifact_artifact_id: "hspc-reference-api-webapp-multitenant"
api_stu3_server_artifact_version: "1.5.2-SNAPSHOT"
api_stu3_server_artifact_packaging: "jar"
api_stu3_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/reference/{{api_stu3_server_artifact_artifact_id}}/{{api_stu3_server_artifact_version}}/{{api_stu3_server_artifact_artifact_id}}-{{api_stu3_server_artifact_version}}.{{api_stu3_server_artifact_packaging}}"

api_server_default_sandbox_url: "{{api_stu3_server_external_url}}/{{api_stu3_server_sandbox}}/data"

# Messaging Server
messaging_server_host: "localhost"
messaging_server_port: "8091"
messaging_server_url: "http://{{messaging_server_host}}:{{messaging_server_port}}"
messaging_server_external_host: "localhost"
messaging_server_external_port: "9091"
messaging_server_external_url: "http://{{messaging_server_external_host}}:{{messaging_server_external_port}}"
messaging_server_initial_memory: 128M
messaging_server_max_memory: 256M
messaging_server_artifact_group_id: "org.hspconsortium.reference"
messaging_server_artifact_artifact_id: "hspc-reference-messaging"
messaging_server_artifact_version: "1.3.0-SNAPSHOT"
messaging_server_artifact_packaging: "jar"
messaging_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/reference/{{messaging_server_artifact_artifact_id}}/{{messaging_server_artifact_version}}/{{messaging_server_artifact_artifact_id}}-{{messaging_server_artifact_version}}.{{messaging_server_artifact_packaging}}"

# Apps Server
apps_server_host: "localhost"
apps_server_port: "8093"
apps_server_url: "http://{{apps_server_host}}:{{apps_server_port}}"
apps_server_external_host: "localhost"
apps_server_external_port: "9093"
apps_server_external_url: "http://{{apps_server_external_host}}:{{apps_server_external_port}}"
apps_server_initial_memory: 128M
apps_server_max_memory: 256M
apps_server_artifact_group_id: "org.hspconsortium.reference"
apps_server_artifact_artifact_id: "hspc-reference-apps"
apps_server_artifact_version: "1.1-SNAPSHOT"
apps_server_artifact_packaging: "war"
apps_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/reference/{{apps_server_artifact_artifact_id}}/{{apps_server_artifact_version}}/{{apps_server_artifact_artifact_id}}-{{apps_server_artifact_version}}.{{apps_server_artifact_packaging}}"

# Patient Picker
patient_picker_server_host: "localhost"
patient_picker_server_port: "8094"
patient_picker_server_url: "http://{{patient_picker_server_host}}:{{patient_picker_server_port}}"
patient_picker_server_external_host: "localhost"
patient_picker_server_external_port: "9094"
patient_picker_server_external_url: "http://{{patient_picker_server_external_host}}:{{patient_picker_server_external_port}}"
patient_picker_server_initial_memory: 128M
patient_picker_server_max_memory: 256M
patient_picker_server_artifact_group_id: "org.hspconsortium.sandbox"
patient_picker_server_artifact_artifact_id: "hspc-patient-picker"
patient_picker_server_artifact_version: "1.1-SNAPSHOT"
patient_picker_server_artifact_packaging: "war"
patient_picker_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/sandbox/{{patient_picker_server_artifact_artifact_id}}/{{patient_picker_server_artifact_version}}/{{patient_picker_server_artifact_artifact_id}}-{{patient_picker_server_artifact_version}}.{{patient_picker_server_artifact_packaging}}"

# SandboxManager Server
sandman_server_host: "localhost"
sandman_server_port: "8080"
sandman_server_url: "http://{{sandman_server_host}}:{{sandman_server_port}}"
sandman_server_external_host: "localhost"
sandman_server_external_port: "9080"
sandman_server_external_url: "http://{{sandman_server_external_host}}:{{sandman_server_external_port}}"
sandman_server_initial_memory: 128M
sandman_server_max_memory: 256M
sandman_server_artifact_group_id: "org.hspconsortium.sandbox"
sandman_server_artifact_artifact_id: "hspc-sandbox-manager"
sandman_server_artifact_version: "1.6-SNAPSHOT"
sandman_server_artifact_packaging: "war"
sandman_server_artifact_location: "{{m2_repo_folder}}/org/hspconsortium/sandbox/{{sandman_server_artifact_artifact_id}}/{{sandman_server_artifact_version}}/{{sandman_server_artifact_artifact_id}}-{{sandman_server_artifact_version}}.{{sandman_server_artifact_packaging}}"
sandman_server_database: "sandman"
sandman_server_ddl_auto: "update"
sandman_server_defaultSystemRoles: "USER,CREATE_SANDBOX"
sandman_server_defaultSandboxCreatorRoles: "ADMIN,MANAGE_USERS,MANAGE_DATA"
sandman_server_defaultPrivateSandboxRoles: "USER,MANAGE_USERS,MANAGE_DATA"
sandman_server_defaultSandboxVisibility: "PUBLIC"
sandman_server_defaultPublicSandboxRoles: "PUBLIC"
sandman_server_send_email: "false"
sandman_server_oauth_admin_access_client_id: "sandman_admin"
sandman_server_oauth_admin_access_client_secret: "secret"

nginx_home: "/etc/nginx"
fhir_home: "/home/fhir"
installer_user: "vagrant"
installer_user_home: "/home/{{installer_user}}"
installer_home: "{{installer_user_home}}/installer"

user_scripts_home: "{{hosting_user_home}}/scripts"
user_jobs_home: "{{hosting_user_home}}/jobs"
user_jobs_output_home: "{{user_jobs_home}}/output"

enable_aws_snapshot: false
aws_output_format: 'json'
aws_region: "changeme"
aws_access_key_id: "changeme"
aws_secret_access_key: "changeme"
aws_ec2_volume_id: "changeme"

# Maximum size of sample patient data files
max_upload_size: "5M"

# Email server account
email_account_description: "Example Account Services"
email_smtp_address: "smtp.example.com"
email_smtp_port: "587"
email_smtp_username: "changeme"
email_smtp_password: "changeme"
email_smtp_password_encrypted: "changeme"
email_admin_address: "changeme@example.com"
email_contact_addresss: "support@example.org"